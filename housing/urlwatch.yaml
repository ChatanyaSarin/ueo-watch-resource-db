display:
  error: true
  new: true
  unchanged: false
job_defaults:
  all:
    max_tries: 2
    ignore_cached: true
    filter:
      - selective:
          select_pattern:
            - '.*housekeys\d+\.com'
            - '.*relatedcalifornia\.com'
            - '.*deanzaproperties\.com'
          invert_selection: true
          filter: css
          selector: body
          exclude: 'nav,#navigation,#nav,[data-content-field="navigation"]'
      - css:
          selector: body
          exclude: 'div.gform_wrapper,a[href^="/cdn-cgi/l/email-protection"],ul[id^="slideshow"],div.slideshow-wrapper,div.orbit,div.ngg-slideshow,div.lazy-community-carousel,.flickity-viewport,div.testimonials-widget,.adtester-container,.today-office-hours,.yelp-reviews,.other-communities,img[src^="https://api.fouanalytics.com"],.search-form,.searchForm,.search_form,.contact-form,.contactForm,.contact_form,.office-hours,#BrochureDateTime,div.latest-news,div.latest-blog-post,div.apartment-reviews,.g-review,.posts-wrapper,#ole_office_hours_status,img[src^="data:"],span.xversion,div[id$="google-cache-hdr"],img[src*="pixel.quantserve.com"],div.vue-google-map,[aria-label="Filter by Move in Date"],#onetrust-consent-sdk,#top-menu,.top_menu,.community-nearby,.ecs_components__notification__wrap'
      - re.sub: 'Image Detail [a-z0-9]{32}'
      - re.sub:
          pattern: '/x(.*?\.[a-zA-Z]{3,4})(,qitok=[a-zA-Z0-9]{8})?\.pagespeed\.ic\.[a-zA-Z0-9-]{10}\.[a-zA-Z]{3,4}'
          repl: '/\1'
      - re.sub: '\?itok=[a-zA-Z0-9]{8}'
      - re.sub: 'GA1\.\d\.\d{1,10}\.\d{10}'
      - re.sub:
          pattern: 'href="tel:\((\d{3})\)(%20| )(\d{3})-(\d{4})'
          repl: 'href="tel:+1\1\3\4'
      - html2text:
          method: pyhtml2text
      - re.sub: 'Â©.*?20\d{2}'
      - re.sub: 'Copyright 20\d{2}'
      - re.sub: 'time=\d+'
      - re.sub: 'BESbswy' # Remove annoying string from hollandresidential.com
      - if_empty: error
  browser:
    wait_until: networkidle2
  shell: {}
  url: {}
report:
  custom_email:
    enabled: true
    from: 'Changebot <changebot@theunitedeffort.org>'
    to: 'housing-db-editors@theunitedeffort.org'
    reply_to: 'housing-db-editors@theunitedeffort.org'
    html: false
    method: sendmail
    sendmail:
      path: /sbin/sendmail
    subject: '{count} housing changes detected ({datetime})'
    details_url: https://storage.googleapis.com/ueo-changes/housing/report-{datetime}.html
  gcs:
    enabled: true
    filename: report-{datetime}.html
    bucket: ueo-changes
    local_dir: ~/ueo-watch/housing/staging
    gcs_dir: housing
  html:
    diff: table
    enabled: false
  stdout:
    color: true
    enabled: true
  text:
    details: false
    footer: true
    line_length: 75
    minimal: false
    enabled: false
  markdown:
    enabled: false
